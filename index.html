<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EDUKIDS üßíüî¢ - Aprende con Operaciones</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(to bottom right, #ffdde1, #ee9ca7);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden;
      position: relative;
    }

    .container {
      background: #fffbe6;
      border-radius: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      padding: 25px;
      width: 95%;
      max-width: 450px;
      text-align: center;
      position: relative;
      z-index: 2;
    }

    h1 {
      color: #2c3e50;
      font-size: 1.8em;
      margin-bottom: 15px;
      line-height: 1.3;
    }

    .question {
      font-size: 2em;
      margin-bottom: 20px;
      color: #2980b9;
      font-weight: bold;
    }

    .instruction {
      font-size: 1em;
      color: #666;
      margin-bottom: 15px;
    }

    input[type="number"] {
      padding: 12px;
      font-size: 1.5em;
      width: 80%;
      margin-bottom: 20px;
      border: 3px solid #3498db;
      border-radius: 15px;
      text-align: center;
      outline: none;
    }

    .buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 20px;
    }

    button {
      background-color: #f39c12;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 1em;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 100%;
    }

    button:hover {
      background-color: #e67e22;
      transform: scale(1.03);
    }

    .help-button {
      background-color: #9b59b6;
    }

    .help-button:hover {
      background-color: #8e44ad;
    }

    /* Confeti extendido */
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 10px;
      opacity: 0.8;
      border-radius: 50%;
      animation: fall linear infinite;
      will-change: transform, opacity;
    }

    @keyframes fall {
      0% {
        transform: translateY(-50px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Modal base */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background-color: #fff;
      padding: 25px;
      border-radius: 20px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 6px 25px rgba(0,0,0,0.2);
      text-align: left;
      animation: fadeIn 0.3s ease-in-out;
      z-index: 1001;
    }

    .modal-header {
      font-size: 1.4em;
      font-weight: bold;
      margin-bottom: 15px;
      color: #2c3e50;
    }

    .modal-body {
      font-size: 1em;
      line-height: 1.5;
      color: #333;
      margin-bottom: 20px;
    }

    .close-btn {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
    }

    .close-btn:hover {
      background-color: #c0392b;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    @media (max-width: 500px) {
      .question {
        font-size: 1.7em;
      }

      input[type="number"] {
        font-size: 1.3em;
        width: 90%;
      }

      button {
        font-size: 1em;
      }

      .modal-content {
        padding: 20px;
        border-radius: 15px;
      }

      .modal-header {
        font-size: 1.2em;
      }

      .modal-body {
        font-size: 0.95em;
      }
    }
  </style>
</head>
<body>

  <!-- Contenedor de confeti -->
  <div class="confetti" id="confettiContainer"></div>

  <!-- Interfaz principal -->
  <div class="container">
    <h1>EDUKIDS üßíüî¢<br><small style="font-size:0.7em; color:#777;">Aprende con Operaciones</small></h1>

    <p class="instruction">¬°Resuelve la operaci√≥n y escribe tu respuesta abajo!</p>

    <div class="question" id="question">Cargando pregunta...</div>

    <input type="number" id="answerInput" placeholder="Tu respuesta aqu√≠" />
    <br/>

    <button onclick="checkAnswer()">‚úÖ Enviar Respuesta</button>

    <div class="buttons">
      <button onclick="nextQuestion()">üîÅ Nuevo Ejercicio</button>
      <button onclick="openModeModal()">üéÆ Elegir Operaci√≥n</button>
      <button class="help-button" onclick="showHelp()">‚ùì Ayuda</button>
    </div>
  </div>

  <!-- Modal de Modo -->
  <div class="modal" id="modeModal">
    <div class="modal-content">
      <div class="modal-header">‚öôÔ∏è Cambiar Modo</div>
      <div class="modal-body">
        <label for="operation">Selecciona la operaci√≥n:</label>
        <select id="operation" onchange="generateQuestion()">
          <option value="multiplication">Multiplicaci√≥n</option>
          <option value="addition">Suma</option>
          <option value="subtraction">Resta</option>
          <option value="division">Divisi√≥n</option>
        </select>
        <br/>
        <label for="range">Rango de n√∫meros:</label>
        <select id="range" onchange="generateQuestion()">
          <option value="10">1 - 10</option>
          <option value="12">1 - 12</option>
          <option value="15">1 - 15</option>
        </select>
      </div>
      <button class="close-btn" onclick="closeModeModal()">Cerrar</button>
    </div>
  </div>

  <!-- Modal de Ayuda -->
  <div class="modal" id="helpModal">
    <div class="modal-content">
      <div class="modal-header" id="modalTitle">üìò ¬øC√≥mo te puedo ayudar?</div>
      <div class="modal-body" id="modalBody">Aqu√≠ aparecer√° una explicaci√≥n sencilla.</div>
      <button class="close-btn" onclick="closeHelp()">Cerrar</button>
    </div>
  </div>

  <!-- Modal de √âxito -->
  <div class="modal" id="successModal">
    <div class="modal-content">
      <div class="modal-header">üéâ ¬°Excelente!</div>
      <div class="modal-body" id="successBody">
        üåü ¬°Lo lograste! Muy bien hecho, sigues aprendiendo cada d√≠a m√°s.
      </div>
      <button class="close-btn" onclick="closeSuccessModal()">Siguiente</button>
    </div>
  </div>

  <!-- Modal de Error -->
  <div class="modal" id="errorModal">
    <div class="modal-content">
      <div class="modal-header" id="errorHeader"></div>
      <div class="modal-body" id="errorBody"></div>
      <button class="close-btn" onclick="closeErrorModal()">Continuar</button>
    </div>
  </div>

  <script>
    let num1 = 0;
    let num2 = 0;
    let correctAnswer = 0;

    function generateQuestion() {
      const rangeVal = parseInt(document.getElementById("range").value);
      const operation = document.getElementById("operation").value;
      const questionDiv = document.getElementById("question");

      if (operation === "multiplication") {
        num1 = Math.floor(Math.random() * rangeVal) + 1;
        num2 = Math.floor(Math.random() * rangeVal) + 1;
        correctAnswer = num1 * num2;
        questionDiv.textContent = `${num1} √ó ${num2} = ?`;
      } else if (operation === "addition") {
        num1 = Math.floor(Math.random() * rangeVal) + 1;
        num2 = Math.floor(Math.random() * rangeVal) + 1;
        correctAnswer = num1 + num2;
        questionDiv.textContent = `${num1} + ${num2} = ?`;
      } else if (operation === "subtraction") {
        num1 = Math.floor(Math.random() * rangeVal) + 1;
        num2 = Math.floor(Math.random() * rangeVal) + 1;
        [num1, num2] = [Math.max(num1, num2), Math.min(num1, num2)];
        correctAnswer = num1 - num2;
        questionDiv.textContent = `${num1} ‚àí ${num2} = ?`;
      } else if (operation === "division") {
        num2 = Math.floor(Math.random() * (rangeVal - 1)) + 1;
        correctAnswer = Math.floor(Math.random() * rangeVal) + 1;
        num1 = num2 * correctAnswer;
        questionDiv.textContent = `${num1} √∑ ${num2} = ?`;
      }

      document.getElementById("answerInput").value = "";
    }

    function checkAnswer() {
      const userAnswer = parseFloat(document.getElementById("answerInput").value);

      if (isNaN(userAnswer)) {
        openErrorModal("‚ö†Ô∏è ¬°Ups! üòï", "Olvidaste escribir tu respuesta... No pasa nada, int√©ntalo nuevamente.");
        return;
      }

      if (userAnswer === correctAnswer) {
        showConfetti();
        openSuccessModal();
      } else {
        openErrorModal("‚ö†Ô∏è ¬°Ups! üòï", `La respuesta no era esa... pero tranquilo, todos cometemos errores.<br><br>La respuesta correcta era: <strong>${correctAnswer}</strong>.<br><br>üëè ¬°Vamos! Estoy seguro que lo har√°s genial en el siguiente.`);
      }
    }

    function nextQuestion() {
      generateQuestion();
    }

    // Funciones modales
    function openModeModal() {
      document.getElementById("modeModal").style.display = "flex";
    }

    function closeModeModal() {
      document.getElementById("modeModal").style.display = "none";
    }

    function showHelp() {
      const operation = document.getElementById("operation").value;
      const title = document.getElementById("modalTitle");
      const body = document.getElementById("modalBody");

      switch (operation) {
        case "multiplication":
          title.textContent = "‚úñÔ∏è ¬°Aprende a Multiplicar!";
          body.innerHTML = "La multiplicaci√≥n es como sumar varias veces el mismo n√∫mero.<br><br>Ejemplo: 3 √ó 4 = 12 ‚Üí Esto significa que sumas 3 + 3 + 3 + 3 = 12.<br><br>üí° Tip: Si no est√°s seguro, puedes ir sumando poco a poco hasta llegar al resultado.";
          break;
        case "addition":
          title.textContent = "‚ûï ¬°Aprende a Sumar!";
          body.innerHTML = "La suma es juntar dos o m√°s cantidades para saber cu√°nto hay en total.<br><br>Ejemplo: 5 + 3 = 8 ‚Üí Si tienes 5 manzanas y consigues 3 m√°s, tendr√°s 8 manzanas en total.<br><br>üí° Tip: Usa tus dedos o dibuja palitos para contar si te confundes.";
          break;
        case "subtraction":
          title.textContent = "‚ûñ ¬°Aprende a Restar!";
          body.innerHTML = "La resta es quitar una cantidad de otra para ver qu√© queda.<br><br>Ejemplo: 7 ‚àí 2 = 5 ‚Üí Si tienes 7 caramelos y te comes 2, te quedan 5.<br><br>üí° Tip: Si te cuesta restar, empieza desde el n√∫mero menor y ve contando hacia arriba.";
          break;
        case "division":
          title.textContent = "‚ûó ¬°Aprende a Dividir!";
          body.innerHTML = "La divisi√≥n es repartir algo en partes iguales.<br><br>Ejemplo: 12 √∑ 3 = 4 ‚Üí Si tienes 12 galletas y las repartes entre 3 amigos, cada uno recibe 4.<br><br>üí° Tip: Piensa en cu√°ntas veces cabe un n√∫mero dentro de otro.";
          break;
        default:
          title.textContent = "üìò Ayuda General";
          body.innerHTML = "Elige una operaci√≥n arriba para recibir ayuda espec√≠fica sobre ella.";
      }

      document.getElementById("helpModal").style.display = "flex";
    }

    function closeHelp() {
      document.getElementById("helpModal").style.display = "none";
    }

    function openErrorModal(header, message) {
      document.getElementById("errorHeader").innerHTML = header;
      document.getElementById("errorBody").innerHTML = message;
      document.getElementById("errorModal").style.display = "flex";
    }

    function closeErrorModal() {
      document.getElementById("errorModal").style.display = "none";
      nextQuestion();
    }

    function openSuccessModal() {
      document.getElementById("successModal").style.display = "flex";
    }

    function closeSuccessModal() {
      document.getElementById("successModal").style.display = "none";
      nextQuestion();
    }

    // Animaci√≥n de confeti
    function showConfetti() {
      const container = document.getElementById("confettiContainer");
      container.innerHTML = "";

      const colors = ["#f39c12", "#e74c3c", "#2ecc71", "#3498db", "#9b59b6"];

      for (let i = 0; i < 100; i++) {
        const piece = document.createElement("div");
        piece.classList.add("confetti-piece");
        piece.style.left = Math.random() * 100 + "%";
        piece.style.top = "-10px";
        piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        piece.style.width = piece.style.height = Math.random() * 10 + 10 + "px";
        piece.style.animationDuration = (3 + Math.random() * 2) + "s";
        piece.style.transform = `rotate(${Math.random() * 360}deg)`;
        container.appendChild(piece);
      }

      setTimeout(() => {
        container.innerHTML = "";
      }, 3000);
    }

    window.onload = generateQuestion;
  </script>
</body>
</html>